<!DOCTYPE html>
<html class="ui-page-login">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link href="css/style.css" rel="stylesheet" />
		<style>
			.area {
				margin: 20px auto 0px auto;
				
			}
			.mui-input-group:first-child {
				margin-top: 20px;
				
			}
			.mui-input-group label {
				width: 22%;
				
			}
			.mui-input-row label~input,
			.mui-input-row label~select,
			.mui-input-row label~textarea {
				width: 78%;
			}
			.mui-checkbox input[type=checkbox],
			.mui-radio input[type=radio] {
				top: 6px;
				
			}
			.mui-content-padded {
				margin-top: 25px;
				
			}
			.mui-btn {
				padding: 10px;
				
			}
			.mui-input-row label{
				width: 24%;
				
			}
			.mui-input-row div{
				height: 20px;
			}
			#password,
			#account,
			#password_confirm,
			#email{
				width: 76%;
				
			}
			.mui-btn-primary{
				background-color: #ffa52a;
				border-style: none;
			}

		.mui-input-row
		input{
			text-align: center;
		}
			
		</style>
	</head>

	<body style="font-family: Roboto;">
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">Rider Registration</h1>
		</header>
		<div class="mui-content">
			<form class="mui-input-group" style="height: 400px;">
				<div class="mui-input-row" style="height: 50px;">
					<label>Username</label>
					<input id='account' name = "username" type="text" class="mui-input-clear mui-input"  placeholder="Please enter your username">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>Password</label>
					<input id='password' name = "password" type="password" class="mui-input-clear mui-input"  placeholder="Please enter your password">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label style="text-align: left;">Renter Password</label>
					<input id='password_confirm'  name="password_confirm" type="password" class="mui-input-clear mui-input"  placeholder="Please confirm your password">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>Phone</label>
					<input id='account' name = "phone" type="text" class="mui-input-clear mui-input"  placeholder="Please enter your Phone number">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>Firstname</label>
					<input id='account' name = "Firstname" type="text" class="mui-input-clear mui-input"  placeholder="Please enter your firstname">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>Lastname</label>
					<input id='account' name = "Lastname" type="text" class="mui-input-clear mui-input"  placeholder="Please enter your lastname">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>ID</label>
					<input id='account' name = "id" type="text" class="mui-input-clear mui-input"  placeholder="Please enter your ID/Passport">
				</div>
				<div class="mui-input-row" style="height: 50px;">
					<label>Emali</label>
					<input id='email' name = "email" type="email" class="mui-input-clear mui-input"  placeholder="Please enter your e-mail address">
				</div>
			</form>
			<div class="mui-content-padded">
				<button id='reg' class="mui-btn mui-btn-block mui-btn-primary">Registrations</button>
			</div>
			<div class="mui-content-padded">
				<p>The registration is real and available, the registered user can be used to log in, but the sample program does not interact with the server, the user related data is only stored locally.</p>
			</div>
		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/app.js"></script>
		<script>
		    document.addEventListener('DOMContentLoaded', function() {
		        var regButton = document.getElementById('reg');
		
		        // 注册按钮点击事件处理函数
		        regButton.addEventListener('click', function(event) {
		            // 阻止表单的默认提交行为
		            event.preventDefault();
		
		            // 收集表单数据
		            var formData = new FormData();
		            formData.append('username', document.querySelector('[name="username"]').value);
		            formData.append('password', document.querySelector('[name="password"]').value);
		            formData.append('password_confirm', document.querySelector('[name="password_confirm"]').value);
		            formData.append('phone', document.querySelector('[name="phone"]').value);
		            formData.append('firstname', document.querySelector('[name="Firstname"]').value);
		            formData.append('lastname', document.querySelector('[name="Lastname"]').value);
		            formData.append('id', document.querySelector('[name="id"]').value);
		            formData.append('email', document.querySelector('[name="email"]').value);
		
		            // 校验密码一致性
		            if (formData.get('password') !== formData.get('password_confirm')) {
		                alert('The passwords do not match.');
		                return;
		            }
		
		            // 发送异步请求到服务器
		            fetch('https://ts.tuotuohome.asia/rider_reg.php', {
		                method: 'POST',
		                body: formData
		            })
		            .then(response => response.json()) // 假设服务器返回JSON
		            .then(data => {
		                // 处理服务器响应
		                if (data.success) {
		                    alert('Registration successful');
		                    // 注册成功后的处理，例如跳转到登录页面
		                    plus.webview.getLaunchWebview().show("pop-in",200,function () {
		                    	plus.webview.currentWebview().close("none");
		                    });
		                } else {
		                    alert(data.message); // 显示错误消息
		                }
		            })
		            .catch(error => {
		                console.error('Registration failed:', error);
		                alert('Registration failed');
		            });
		        });
		    });
		</script>


	</body>

</html>
